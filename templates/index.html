{% extends "base.html" %}

{% block title %}Browse Collection - Humphrey Golf{% endblock %}

{% block sidebar %}
<aside class="sidebar">
    <div class="search-section">
        <h3>üîç Filter Collection</h3>
        
        <div class="search-field">
            <label for="search-query">Search</label>
            <input type="text" id="search-query" placeholder="Ball name, manufacturer...">
        </div>
        
        <div class="search-field">
            <label for="filter-folio">Folio</label>
            <select id="filter-folio">
                <option value="">All Folios</option>
                <option value="1" selected>Folio I: Gutta-Percha 1845‚Äì1903</option>
                <!-- Future folios will be added here -->
            </select>
        </div>
        
        <div class="search-field">
            <label for="filter-era">Era</label>
            <select id="filter-era">
                <option value="">All Eras</option>
                {% for era in eras %}
                <option value="{{ era.era }}">{{ era.era }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="search-field">
            <label for="filter-pattern">Cover Pattern</label>
            <select id="filter-pattern">
                <option value="">All Patterns</option>
                {% for pattern in patterns %}
                <option value="{{ pattern.cover_pattern }}">{{ pattern.cover_pattern }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="search-field">
            <label for="filter-country">Country</label>
            <select id="filter-country">
                <option value="">All Countries</option>
                {% for country in countries %}
                <option value="{{ country.country }}">{{ country.country }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="search-field">
            <label for="filter-condition">Condition</label>
            <select id="filter-condition">
                <option value="">All Conditions</option>
                {% for cond in conditions %}
                <option value="{{ cond.condition_grade }}">{{ cond.condition_grade }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="search-field">
            <label for="min-value">Min Value ($)</label>
            <input type="number" id="min-value" placeholder="0">
        </div>
        
        <div class="search-field">
            <label for="max-value">Max Value ($)</label>
            <input type="number" id="max-value" placeholder="No max">
        </div>
        
        <div class="search-buttons">
            <button class="btn btn-primary" onclick="searchBalls()">Apply</button>
            <button class="btn btn-secondary" onclick="resetFilters()">Reset</button>
        </div>
    </div>
    
    <div style="margin-top: 2rem; padding: 1rem; background: var(--color-cream); border-radius: 8px;">
        <h4 style="font-family: var(--font-heading); color: var(--color-primary); margin-bottom: 0.5rem;">üìä Quick Stats</h4>
        <p style="font-size: 0.9rem; margin: 0.5rem 0;"><strong>{{ stats.total }}</strong> balls</p>
        <p style="font-size: 0.9rem; margin: 0.5rem 0;">Avg: <strong>${{ "{:,.0f}".format(stats.avg_value) }}</strong></p>
        <p style="font-size: 0.9rem; margin: 0.5rem 0;">Max: <strong>${{ "{:,.0f}".format(stats.max_value) }}</strong></p>
    </div>
</aside>
{% endblock %}

{% block content %}
<div class="results-header">
    <h2 style="font-family: var(--font-heading); color: var(--color-primary);">Collection</h2>
    <span class="results-count" id="results-count">Loading...</span>
</div>

<div id="results-container" class="cards-grid">
    <div class="loading">
        <div class="spinner"></div>
        <p>Loading collection...</p>
    </div>
</div>

<div class="pagination" id="pagination"></div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}
